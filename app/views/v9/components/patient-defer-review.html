<h1 class="nhsuk-fieldset__legend--m">Review patient screening participation</h1>

{% if data['pnl-defer-reason'] == "Pregnancy" %}

{% set estimatedDateOfDelivery = data['edd-year'] + "-" + data['edd-month'] + "-" + data['edd-day'] %}

  {{ summaryList({
  rows: [
    {
      key: {
        text: "Action"
      },
      value: {
        text: data['pnl-action'] or 'Defer'
      },
      actions: {
        items: [
          {
            href: "prior-notification-9-action",
            text: "Change",
            visuallyHiddenText: "name"
          }
        ]
      }
    },
    {
      key: {
        text: "Defer reason"
      },
      value: {
        text: data['pnl-defer-reason'] or 'Pregnancy'
      },
      actions: {
        items: [
          {
            href: "prior-notification-9-defer-reason",
            text: "Change",
            visuallyHiddenText: "date of birth"
          }
        ]
      }
    },
    {
      key: {
        text: "Estimated date of delivery"
      },
      value: {
        text:  estimatedDateOfDelivery | returnDateFormat + ' ' + estimatedDateOfDelivery | returnTimeDiff
      },
      actions: {
        items: [
          {
            href: "prior-notification-9-defer-reason",
            text: "Change",
            visuallyHiddenText: "date of birth"
          }
        ]
      }
    },
    {
      key: {
        text: "Defer length"
      },
      value: {
        html: data['defer-length'] or '3 Months'
      },
      actions: {
        items: [
          {
            href: "prior-notification-9-defer-length",
            text: "Change",
            visuallyHiddenText: "change defer length"
          }
        ]
      }
    },
    {
      key: {
        text: "Calculated next test due date"
      },
      value: {
        html: data['defer-length'] | returnDate('months', estimatedDateOfDelivery ) + ' ' +  (data['defer-length'] | returnDate('months', estimatedDateOfDelivery )) | returnTimeDiff
      },
      actions: {
        items: [
          {
            href: "#",
            text: "",
            visuallyHiddenText: "contact details"
          }
        ]
      }
    }
  ]
}) }}

{% else %}

{{ summaryList({
  rows: [
    {
      key: {
        text: "Action"
      },
      value: {
        text: data['pnl-action'] or 'Defer'
      },
      actions: {
        items: [
          {
            href: "prior-notification-9-action",
            text: "Change",
            visuallyHiddenText: "name"
          }
        ]
      }
    },
    {
      key: {
        text: "Defer reason"
      },
      value: {
        text: data['pnl-defer-reason'] or 'Pregnancy'
      },
      actions: {
        items: [
          {
            href: "prior-notification-9-defer-reason",
            text: "Change",
            visuallyHiddenText: "date of birth"
          }
        ]
      }
    },
    {
      key: {
        text: "Defer length"
      },
      value: {
        html: data['defer-length'] or '3 Months'
      },
      actions: {
        items: [
          {
            href: "prior-notification-9-defer-length",
            text: "Change",
            visuallyHiddenText: "change defer length"
          }
        ]
      }
    },
    {
      key: {
        text: "Calculated next test due date"
      },
      value: {
        html: data['defer-length'] | returnDate('months') + ' ' +  (data['defer-length'] | returnDate('months' )) | returnTimeDiff
      },
      actions: {
        items: [
          {
            href: "#",
            text: "",
            visuallyHiddenText: "contact details"
          }
        ]
      }
    }
  ]
}) }}

{% endif %}

  


  <a href="/v9/prior-notification/prior-notification-9-deferred" class="nhsuk-button nhsuk-button--ers">Submit</a>